<link rel="stylesheet" href="./style.css">


<body>
</body>

<script type="module">

  import { Game } from './src/game.js';
  import { Entity } from './src/entity.js';

  const rectPath = new Path2D( 'M -1,-1 L 1,-1 L 1,1 L -1,1 Z' );

  class Paddle extends Entity {
    width = 50;
    height = 5;
    path = rectPath;
  }

  class Wall extends Entity {
    constructor( x1, y1, x2, y2 ) {
      super( {
        x: ( x1 + x2 ) / 2,
        y: ( y1 + y2 ) / 2,
        angle: Math.atan2( y2 - y1, x2 - x1 ),
        width: Math.hypot( x2 - x1, y2 - y1 ) / 2,
        height: 1,
        fillStyle: 'white',
        path: rectPath, 
      } );
    }
  }

  class Ball extends Entity {
    width = 10;
    height = 10;
    path = new Path2D( 'M -1 0 A 1 1 0 0 1 1 0 A 1 1 0 0 1 -1 0' );
  }

  const player = new Paddle( { x: 300, y: 200, angle:  Math.PI / 4, fillStyle: 'red' } );
  const enemy  = new Paddle( { x: 300, y: 200, angle: -Math.PI / 4, fillStyle: 'aqua' } );
  
  const paddles = [ player, enemy ];

  const balls = [ new Ball( { x: 100, y: 100, fillStyle: 'yellow' } ) ];

  const walls = [];

  const wallPoints = [ [ 50, 250 ], [ 250, 50 ], [ 450, 250 ], [ 250, 450 ] ];

  for ( let i = 0; i < wallPoints.length; i ++ ) {
    const a = wallPoints[ i ];
    const b = wallPoints[ ( i + 1 ) % wallPoints.length ];
    walls.push( new Wall( a[ 0 ], a[ 1 ], b[ 0 ], b[ 1 ] ) );
  }


  const game = new Game();
  game.update = ( dt ) => {
    paddles.forEach( p => p.update( dt ) );
    balls.forEach( b => b.update( dt ) );
  };

  game.draw = ( ctx ) => {
    walls.forEach( w => w.draw( ctx ) );
    paddles.forEach( p => p.draw( ctx ) );
    balls.forEach( b => b.draw( ctx ) );
  };

  

</script>

